var ye=(n,e,l)=>{if(!e.has(n))throw TypeError("Cannot "+l)};var u=(n,e,l)=>(ye(n,e,"read from private field"),l?l.call(n):e.get(n)),v=(n,e,l)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,l)},k=(n,e,l,t)=>(ye(n,e,"write to private field"),t?t.call(n,l):e.set(n,l),l);var A=(n,e,l)=>(ye(n,e,"access private method"),l);import{s as ne,e as b,d as C,S as q,v as _,k as I,n as j,i as m,p as Z,T as Le,f as P,U as x,C as rt,r as Qe,V as Ze,x as Me,W as nt,b as Y,t as fe,j as B,h as de,l as p,m as Pe,X as ze}from"../chunks/scheduler.DlN8ExfC.js";import{S as oe,i as ie,t as $,g as Te,a as U,c as Se,f as ot,b as we,d as Ee,m as Oe,e as $e,h as Re}from"../chunks/index.C-N95wP-.js";function pe(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function it(n){let e,l="<p>Gioca a Color Clash in modalit√† portrait.</p>";return{c(){e=b("div"),e.innerHTML=l,this.h()},l(t){e=C(t,"DIV",{class:!0,"data-svelte-h":!0}),q(e)!=="svelte-cy5swd"&&(e.innerHTML=l),this.h()},h(){_(e,"class","disclaimer svelte-12ah62n")},m(t,s){I(t,e,s)},p:j,i:j,o:j,d(t){t&&m(e)}}}class at extends oe{constructor(e){super(),ie(this,e,null,it,ne,{})}}const Ge="off",ct="on",ut="empty";var X,J,Q,ee;class O{constructor(e,l,t){v(this,X,0);v(this,J,0);v(this,Q,1);v(this,ee,Ge);k(this,Q,t),k(this,X,e),k(this,J,l)}get row(){return u(this,X)}set row(e){k(this,X,e)}get col(){return u(this,J)}set col(e){k(this,J,e)}get type(){return u(this,Q)}set type(e){k(this,Q,e)}get status(){return u(this,ee)}set status(e){k(this,ee,e)}static get STATUS_OFF(){return Ge}static get STATUS_ON(){return ct}static get STATUS_EMPTY(){return ut}}X=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap;function ht(n){let e,l,t,s;return{c(){e=b("div"),this.h()},l(i){e=C(i,"DIV",{class:!0,"aria-hidden":!0});var r=P(e);r.forEach(m),this.h()},h(){_(e,"class",l="cell cell-"+n[0].type+"-"+n[0].status+" svelte-g78r3r"),_(e,"aria-hidden","true")},m(i,r){I(i,e,r),t||(s=[x(e,"mouseenter",n[2]),x(e,"mouseleave",n[3]),x(e,"click",n[4])],t=!0)},p(i,r){r&1&&l!==(l="cell cell-"+i[0].type+"-"+i[0].status+" svelte-g78r3r")&&_(e,"class",l)},d(i){i&&m(e),t=!1,rt(s)}}}function ft(n){let e,l,t,s;return{c(){e=b("div"),this.h()},l(i){e=C(i,"DIV",{class:!0,"aria-hidden":!0});var r=P(e);r.forEach(m),this.h()},h(){_(e,"class",l="cell cell-"+n[0].type+"-"+n[0].status+" svelte-g78r3r"),_(e,"aria-hidden","true")},m(i,r){I(i,e,r),t||(s=x(e,"touchstart",n[5],{passive:!0}),t=!0)},p(i,r){r&1&&l!==(l="cell cell-"+i[0].type+"-"+i[0].status+" svelte-g78r3r")&&_(e,"class",l)},d(i){i&&m(e),t=!1,s()}}}function dt(n){let e;function l(i,r){return i[1]?ft:ht}let t=l(n),s=t(n);return{c(){s.c(),e=Z()},l(i){s.l(i),e=Z()},m(i,r){s.m(i,r),I(i,e,r)},p(i,[r]){t===(t=l(i))&&s?s.p(i,r):(s.d(1),s=t(i),s&&(s.c(),s.m(e.parentNode,e)))},i:j,o:j,d(i){i&&m(e),s.d(i)}}}function pt(n,e,l){let{cell:t}=e,{mobile:s}=e,i=!1,r=Le();const a=()=>{t.status!=O.STATUS_EMPTY&&r("getFocus",{r:t.row,c:t.col})},o=()=>{t.status!=O.STATUS_EMPTY&&r("lostFocus",{r:t.row,c:t.col})},c=()=>{console.log("CLICK"),t.status!=O.STATUS_EMPTY&&r("clash",{r:t.row,c:t.col})},w=()=>{console.log("START"),i==!1?(i=!0,a(),setTimeout(()=>{o(),i=!1},1500)):c()};return n.$$set=f=>{"cell"in f&&l(0,t=f.cell),"mobile"in f&&l(1,s=f.mobile)},[t,s,a,o,c,w]}class gt extends oe{constructor(e){super(),ie(this,e,pt,dt,ne,{cell:0,mobile:1})}}class ke extends Array{add(e){e&&this.push(e)}has(e){return this.filter(l=>l==e).length>0}remove(){return this.shift()}}const mt=10,_t=15,vt=10,bt=8;var ge,F,L,N,M,me,_e,et,te,Ue,se,De,le,Fe,re,Ie,ve,tt,be,st,Ce,lt;class xe{constructor(e,l){v(this,_e);v(this,te);v(this,se);v(this,le);v(this,re);v(this,ve);v(this,be);v(this,Ce);v(this,ge,3);v(this,F,[0][0]);v(this,L,0);v(this,N,0);v(this,M,new ke);v(this,me,15);k(this,F,[...Array(e)].map((t,s)=>[...Array(l)].map((i,r)=>new O(s,r,A(this,_e,et).call(this))))),k(this,L,e),k(this,N,l)}get rows(){return u(this,L)}get cols(){return u(this,N)}getCell(e,l){return e>=0&&e<u(this,L)&&l>=0&&l<u(this,N)?u(this,F)[e][l]:null}preClashON(){u(this,M).map(e=>e.status=O.STATUS_ON)}preClashOFF(){u(this,M).map(e=>e.status=O.STATUS_OFF),u(this,M).length=0}preClash(e,l){u(this,M).length=0;let t=new ke,s=new ke,i=this.getCell(e,l),r=i.type;for(t.add(i);t.length>0;){let a=[],o=t.remove();s.has(o)||s.add(o),a.push(A(this,te,Ue).call(this,o)),a.push(A(this,se,De).call(this,o)),a.push(A(this,le,Fe).call(this,o)),a.push(A(this,re,Ie).call(this,o)),a.forEach(c=>{c&&c.type==r&&c.status!=O.STATUS_EMPTY&&!s.has(c)&&t.add(c)})}s.length>1&&k(this,M,s)}clash(){let e=0;return u(this,M).length>0&&(e=Math.pow(u(this,M).length-2,2)),u(this,M).map(l=>{l.status=O.STATUS_EMPTY}),u(this,M).length=0,e}findTop(e){let l=e.row-1;for(;l>=0;){let t=this.getCell(l--,e.col);if(t.status!=O.STATUS_EMPTY)return t}return null}findRight(e){let l=e.col+1;for(;l<=u(this,N)-1;){let t=this.getCell(e.row,l--);if(t.status!=O.STATUS_EMPTY)return t}return null}swapCells(e,l){let[t,s]=[e.row,e.col];u(this,F)[l.row][l.col]=e,u(this,F)[e.row][e.col]=l,e.row=l.row,e.col=l.col,l.row=t,l.col=s}shiftCells(){A(this,ve,tt).call(this),A(this,be,st).call(this)}isGameOver(){let e=0,l=u(this,F).flat(1).filter(t=>t.status!=O.STATUS_EMPTY);return l.length<=u(this,me)?(l.forEach(t=>{e+=A(this,Ce,lt).call(this,t)}),e==0):!1}}ge=new WeakMap,F=new WeakMap,L=new WeakMap,N=new WeakMap,M=new WeakMap,me=new WeakMap,_e=new WeakSet,et=function(){return Math.floor(Math.random()*u(this,ge))+1},te=new WeakSet,Ue=function(e){return this.getCell(e.row-1,e.col)},se=new WeakSet,De=function(e){return this.getCell(e.row+1,e.col)},le=new WeakSet,Fe=function(e){return this.getCell(e.row,e.col+1)},re=new WeakSet,Ie=function(e){return this.getCell(e.row,e.col-1)},ve=new WeakSet,tt=function(){for(let e=u(this,L)-1;e>0;e--)u(this,F)[e].filter(t=>t.status==O.STATUS_EMPTY).forEach(t=>{let s=this.findTop(t);s&&s.status!=O.STATUS_EMPTY&&this.swapCells(t,s)})},be=new WeakSet,st=function(){u(this,F)[u(this,L)-1].filter(l=>l.status==O.STATUS_EMPTY).forEach(l=>{for(let t=l.col;t<u(this,N)-1;t++)for(let s=u(this,L)-1;s>=0;s--){let i=this.getCell(s,t),r=this.getCell(s,t+1);this.swapCells(i,r)}})},Ce=new WeakSet,lt=function(e){return[A(this,te,Ue).call(this,e),A(this,se,De).call(this,e),A(this,le,Fe).call(this,e),A(this,re,Ie).call(this,e)].filter(t=>t&&t.type==e.type&&t.status!=O.STATUS_EMPTY).length};class Ct extends xe{constructor(){super(mt,_t)}}class Tt extends xe{constructor(){super(vt,bt)}}function He(n,e,l){const t=n.slice();return t[9]=e[l],t[11]=l,t}function We(n,e,l){const t=n.slice();return t[9]=e[l],t[13]=l,t}function Ke(n){let e,l,t=pe({length:n[0].rows}),s=[];for(let r=0;r<t.length;r+=1)s[r]=Xe(He(n,t,r));const i=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){e=b("div");for(let r=0;r<s.length;r+=1)s[r].c();this.h()},l(r){e=C(r,"DIV",{class:!0});var a=P(e);for(let o=0;o<s.length;o+=1)s[o].l(a);a.forEach(m),this.h()},h(){_(e,"class","board visible svelte-ju0al5")},m(r,a){I(r,e,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);l=!0},p(r,a){if(a&31){t=pe({length:r[0].rows});let o;for(o=0;o<t.length;o+=1){const c=He(r,t,o);s[o]?(s[o].p(c,a),$(s[o],1)):(s[o]=Xe(c),s[o].c(),$(s[o],1),s[o].m(e,null))}for(Te(),o=t.length;o<s.length;o+=1)i(o);Se()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)$(s[a]);l=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)U(s[a]);l=!1},d(r){r&&m(e),Ze(s,r)}}}function qe(n){let e,l,t;function s(r){n[5](r)}let i={cell:n[0].getCell(n[11],n[13])};return n[1]!==void 0&&(i.mobile=n[1]),e=new gt({props:i}),Me.push(()=>ot(e,"mobile",s)),e.$on("getFocus",n[2]),e.$on("lostFocus",n[3]),e.$on("clash",n[4]),{c(){we(e.$$.fragment)},l(r){Ee(e.$$.fragment,r)},m(r,a){Oe(e,r,a),t=!0},p(r,a){const o={};a&1&&(o.cell=r[0].getCell(r[11],r[13])),!l&&a&2&&(l=!0,o.mobile=r[1],nt(()=>l=!1)),e.$set(o)},i(r){t||($(e.$$.fragment,r),t=!0)},o(r){U(e.$$.fragment,r),t=!1},d(r){$e(e,r)}}}function Xe(n){let e,l,t=pe({length:n[0].cols}),s=[];for(let r=0;r<t.length;r+=1)s[r]=qe(We(n,t,r));const i=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=Z()},l(r){for(let a=0;a<s.length;a+=1)s[a].l(r);e=Z()},m(r,a){for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(r,a);I(r,e,a),l=!0},p(r,a){if(a&31){t=pe({length:r[0].cols});let o;for(o=0;o<t.length;o+=1){const c=We(r,t,o);s[o]?(s[o].p(c,a),$(s[o],1)):(s[o]=qe(c),s[o].c(),$(s[o],1),s[o].m(e.parentNode,e))}for(Te(),o=t.length;o<s.length;o+=1)i(o);Se()}},i(r){if(!l){for(let a=0;a<t.length;a+=1)$(s[a]);l=!0}},o(r){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)U(s[a]);l=!1},d(r){r&&m(e),Ze(s,r)}}}function St(n){let e,l,t=n[0]&&Ke(n);return{c(){t&&t.c(),e=Z()},l(s){t&&t.l(s),e=Z()},m(s,i){t&&t.m(s,i),I(s,e,i),l=!0},p(s,[i]){s[0]?t?(t.p(s,i),i&1&&$(t,1)):(t=Ke(s),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(Te(),U(t,1,1,()=>{t=null}),Se())},i(s){l||($(t),l=!0)},o(s){U(t),l=!1},d(s){s&&m(e),t&&t.d(s)}}}function wt(n,e,l){let t=Le(),s=[0][0],i=!1;const r=h=>h.includes("Android")||h.includes("Mobile")||h.includes("iPhone");Qe(()=>{l(1,i=r(navigator.userAgent)),l(0,s=i?new Tt:new Ct)});const a=()=>{l(0,s)},o=h=>{s.preClash(h.detail.r,h.detail.c),s.preClashON(),a()},c=h=>{s.preClashOFF(),a()},w=h=>{let g=s.clash();s.shiftCells(),a(),g>0&&t("score",g),s.isGameOver()&&t("gameOver")};function f(h){i=h,l(1,i)}return[s,i,o,c,w,f]}class Et extends oe{constructor(e){super(),ie(this,e,wt,St,ne,{})}}function Ot(n){let e,l,t="Complimenti hai totalizzato",s,i,r,a,o,c,w="Nuova Partita",f,h;return{c(){e=b("div"),l=b("p"),l.textContent=t,s=Y(),i=b("p"),r=fe(n[0]),a=fe(" punti"),o=Y(),c=b("button"),c.textContent=w,this.h()},l(g){e=C(g,"DIV",{class:!0});var T=P(e);l=C(T,"P",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-13a9859"&&(l.textContent=t),s=B(T),i=C(T,"P",{class:!0});var y=P(i);r=de(y,n[0]),a=de(y," punti"),y.forEach(m),o=B(T),c=C(T,"BUTTON",{class:!0,"data-svelte-h":!0}),q(c)!=="svelte-16cozwr"&&(c.textContent=w),T.forEach(m),this.h()},h(){_(l,"class","score-size svelte-1eh566z"),_(i,"class","score-size svelte-1eh566z"),_(c,"class","svelte-1eh566z"),_(e,"class","score string visible svelte-1eh566z")},m(g,T){I(g,e,T),p(e,l),p(e,s),p(e,i),p(i,r),p(i,a),p(e,o),p(e,c),f||(h=x(c,"click",n[2]),f=!0)},p(g,[T]){T&1&&Pe(r,g[0])},i:j,o:j,d(g){g&&m(e),f=!1,h()}}}function $t(n,e,l){let{score:t=0}=e,s=Le();const i=()=>s("newGame");return n.$$set=r=>{"score"in r&&l(0,t=r.score)},[t,s,i]}class At extends oe{constructor(e){super(),ie(this,e,$t,Ot,ne,{score:0})}}function yt(n){const e=n-1;return e*e*e+1}function Je(n,{delay:e=0,duration:l=400,easing:t=yt,x:s=0,y:i=0,opacity:r=0}={}){const a=getComputedStyle(n),o=+a.opacity,c=a.transform==="none"?"":a.transform,w=o*(1-r),[f,h]=ze(s),[g,T]=ze(i);return{delay:e,duration:l,easing:t,css:(y,D)=>`
			transform: ${c} translate(${(1-y)*f}${h}, ${(1-y)*g}${T});
			opacity: ${o-w*D}`}}function kt(n){let e,l;return e=new At({props:{score:n[0]}}),e.$on("newGame",n[7]),{c(){we(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,s){Oe(e,t,s),l=!0},p(t,s){const i={};s&1&&(i.score=t[0]),e.$set(i)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){$e(e,t)}}}function Mt(n){let e,l;return e=new Et({}),e.$on("score",n[5]),e.$on("gameOver",n[6]),{c(){we(e.$$.fragment)},l(t){Ee(e.$$.fragment,t)},m(t,s){Oe(e,t,s),l=!0},p:j,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){$e(e,t)}}}function Pt(n){let e,l,t,s,i='<p class="string rot-left svelte-jg4i1b">COLOR</p> <p class="string rot-right svelte-jg4i1b">CLASH</p>',r,a,o,c,w,f,h,g,T="BEST SCORE",y,D,H,S,z,R,Ve="TOTAL SCORE",Ae,G,ae,W;e=new at({});const Ye=[Mt,kt],V=[];function Be(d,E){return d[4]==!1?0:1}return o=Be(n),c=V[o]=Ye[o](n),{c(){we(e.$$.fragment),l=Y(),t=b("div"),s=b("div"),s.innerHTML=i,r=Y(),a=b("div"),c.c(),w=Y(),f=b("div"),h=b("div"),g=b("p"),g.textContent=T,y=Y(),D=b("p"),H=fe(n[1]),S=Y(),z=b("div"),R=b("p"),R.textContent=Ve,Ae=Y(),G=b("p"),ae=fe(n[0]),this.h()},l(d){Ee(e.$$.fragment,d),l=B(d),t=C(d,"DIV",{class:!0});var E=P(t);s=C(E,"DIV",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-d7xoi4"&&(s.innerHTML=i),r=B(E),a=C(E,"DIV",{class:!0});var K=P(a);c.l(K),K.forEach(m),w=B(E),f=C(E,"DIV",{class:!0});var ce=P(f);h=C(ce,"DIV",{});var ue=P(h);g=C(ue,"P",{class:!0,"data-svelte-h":!0}),q(g)!=="svelte-kkvpfh"&&(g.textContent=T),y=B(ue),D=C(ue,"P",{class:!0});var Ne=P(D);H=de(Ne,n[1]),Ne.forEach(m),ue.forEach(m),S=B(ce),z=C(ce,"DIV",{});var he=P(z);R=C(he,"P",{class:!0,"data-svelte-h":!0}),q(R)!=="svelte-hfxbvx"&&(R.textContent=Ve),Ae=B(he),G=C(he,"P",{class:!0});var je=P(G);ae=de(je,n[0]),je.forEach(m),he.forEach(m),ce.forEach(m),E.forEach(m),this.h()},h(){_(s,"class","col-left-top visible svelte-jg4i1b"),_(a,"class","col-center-top visible svelte-jg4i1b"),_(g,"class","string score-title svelte-jg4i1b"),_(D,"class","string score-score svelte-jg4i1b"),_(R,"class","string score-title svelte-jg4i1b"),_(G,"class","string score-score svelte-jg4i1b"),_(f,"class","col-right-top visible svelte-jg4i1b"),_(t,"class","wrapper svelte-jg4i1b")},m(d,E){Oe(e,d,E),I(d,l,E),I(d,t,E),p(t,s),p(t,r),p(t,a),V[o].m(a,null),p(t,w),p(t,f),p(f,h),p(h,g),p(h,y),p(h,D),p(D,H),n[8](D),p(f,S),p(f,z),p(z,R),p(z,Ae),p(z,G),p(G,ae),n[9](G),W=!0},p(d,[E]){let K=o;o=Be(d),o===K?V[o].p(d,E):(Te(),U(V[K],1,1,()=>{V[K]=null}),Se(),c=V[o],c?c.p(d,E):(c=V[o]=Ye[o](d),c.c()),$(c,1),c.m(a,null)),(!W||E&2)&&Pe(H,d[1]),(!W||E&1)&&Pe(ae,d[0])},i(d){W||($(e.$$.fragment,d),$(c),W=!0)},o(d){U(e.$$.fragment,d),U(c),W=!1},d(d){d&&(m(l),m(t)),$e(e,d),V[o].d(),n[8](null),n[9](null)}}}function Ut(n,e,l){let t=0,s=0,i=0,r,a,o,c,w=!1;Qe(()=>{l(1,i=f())});const f=()=>{let S=localStorage.getItem("bestScore");return S?+S:0},h=S=>{localStorage.setItem("bestScore",S),l(1,i=S)},g=S=>{t=S.detail,l(0,s+=t),s>i&&(h(s),c=Re(o,Je,{x:-200}),c.start()),a=Re(r,Je,{x:-200}),a.start()},T=()=>l(4,w=!0),y=()=>{l(4,w=!1),l(0,s=0)};function D(S){Me[S?"unshift":"push"](()=>{o=S,l(3,o)})}function H(S){Me[S?"unshift":"push"](()=>{r=S,l(2,r)})}return[s,i,r,o,w,g,T,y,D,H]}class Lt extends oe{constructor(e){super(),ie(this,e,Ut,Pt,ne,{})}}export{Lt as component};
